<Window x:Class="Dorisoy.Meeting.Client.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:views="clr-namespace:Dorisoy.Meeting.Client.Views"
        mc:Ignorable="d"
        Title="Dorisoy Meeting" 
        Height="700" 
        Width="1100"
        MinHeight="500"
        MinWidth="800"
        WindowStartupLocation="CenterScreen"
        Background="#1A1A2E"
        Closing="Window_Closing">

    <Window.Resources>
        <!-- ÂúÜÂΩ¢ÊåâÈíÆÊ†∑Âºè -->
        <Style x:Key="CircleButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="56"/>
            <Setter Property="Height" Value="56"/>
            <Setter Property="Margin" Value="8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid>
                            <Ellipse x:Name="bg" Fill="#3D3D5C" Stroke="#5C5C8A" StrokeThickness="1"/>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bg" Property="Fill" Value="#4D4D6D"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="bg" Property="Fill" Value="#2D2D4D"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="bg" Property="Fill" Value="#2D2D3D"/>
                                <Setter TargetName="bg" Property="Stroke" Value="#3D3D4D"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ÁªøËâ≤ÊøÄÊ¥ªÊåâÈíÆÊ†∑Âºè -->
        <Style x:Key="CircleButtonActiveStyle" TargetType="Button" BasedOn="{StaticResource CircleButtonStyle}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid>
                            <Ellipse x:Name="bg" Fill="#28A745" Stroke="#34CE57" StrokeThickness="1"/>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bg" Property="Fill" Value="#34CE57"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="bg" Property="Fill" Value="#1E7E34"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Á∫¢Ëâ≤ÂÖ≥Èó≠ÊåâÈíÆÊ†∑Âºè -->
        <Style x:Key="CircleButtonDangerStyle" TargetType="Button" BasedOn="{StaticResource CircleButtonStyle}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid>
                            <Ellipse x:Name="bg" Fill="#DC3545" Stroke="#E4606D" StrokeThickness="1"/>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bg" Property="Fill" Value="#E4606D"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="bg" Property="Fill" Value="#BD2130"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ‰æßËæπÊ†èÂàáÊç¢ÊåâÈíÆÊ†∑Âºè -->
        <Style x:Key="SidebarToggleStyle" TargetType="Button">
            <Setter Property="Width" Value="32"/>
            <Setter Property="Height" Value="80"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Background" Value="#2D2D4D"/>
            <Setter Property="Foreground" Value="#AAAACC"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bg" Background="{TemplateBinding Background}" 
                                CornerRadius="0,8,8,0">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bg" Property="Background" Value="#3D3D5C"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ‰æßËæπÊ†è GroupBox Ê†∑Âºè -->
        <Style x:Key="SidebarGroupBoxStyle" TargetType="GroupBox">
            <Setter Property="Foreground" Value="#CCCCEE"/>
            <Setter Property="BorderBrush" Value="#3D3D5C"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
        </Style>

        <!-- ‰æßËæπÊ†èÊ†áÁ≠æÊ†∑Âºè -->
        <Style x:Key="SidebarLabelStyle" TargetType="Label">
            <Setter Property="Foreground" Value="#AAAACC"/>
            <Setter Property="FontSize" Value="12"/>
        </Style>

        <!-- ‰æßËæπÊ†è ComboBox Ê†∑Âºè -->
        <Style x:Key="SidebarComboBoxStyle" TargetType="ComboBox">
            <Setter Property="Background" Value="#2D2D4D"/>
            <Setter Property="Foreground" Value="#DDDDFF"/>
            <Setter Property="BorderBrush" Value="#3D3D5C"/>
        </Style>

        <!-- ‰æßËæπÊ†è TextBox Ê†∑Âºè -->
        <Style x:Key="SidebarTextBoxStyle" TargetType="TextBox">
            <Setter Property="Background" Value="#2D2D4D"/>
            <Setter Property="Foreground" Value="#DDDDFF"/>
            <Setter Property="BorderBrush" Value="#3D3D5C"/>
            <Setter Property="CaretBrush" Value="#DDDDFF"/>
        </Style>
    </Window.Resources>

    <Grid>
        <!-- ‰∏ªÂ∏ÉÂ±ÄÔºöÂ∑¶‰æßËæπÊ†è + Âè≥‰æß‰∏ªÂÜÖÂÆπÂå∫ -->
        <Grid>
            <Grid.ColumnDefinitions>
                <!-- Â∑¶‰æßËæπÊ†è - ÂèØÈöêËóè -->
                <ColumnDefinition Width="Auto"/>
                <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Â∑¶‰æßÊéßÂà∂Èù¢Êùø -->
            <Border Grid.Column="0" 
                    Background="#16213E"
                    Width="300"
                    Visibility="{Binding IsSidebarVisible, Converter={StaticResource BoolToVisConverter}}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="12">
                        
                        <!-- Â∫îÁî®Ê†áÈ¢ò -->
                        <TextBlock Text="Dorisoy Meeting" 
                                   FontSize="20" 
                                   FontWeight="Bold"
                                   Foreground="#7B68EE"
                                   Margin="0,0,0,20"/>

                        <!-- ËøûÊé•ËÆæÁΩÆ -->
                        <GroupBox Header="üì° ËøûÊé•ËÆæÁΩÆ" Style="{StaticResource SidebarGroupBoxStyle}">
                            <StackPanel>
                                <Label Content="ÊúçÂä°Âô®Âú∞ÂùÄ:" Style="{StaticResource SidebarLabelStyle}"/>
                                <TextBox Text="{Binding ServerUrl, UpdateSourceTrigger=PropertyChanged}" 
                                         Style="{StaticResource SidebarTextBoxStyle}"
                                         IsEnabled="{Binding IsConnected, Converter={StaticResource InverseBoolConverter}}"/>

                                <Label Content="ÈÄâÊã©Áî®Êà∑:" Margin="0,8,0,0" Style="{StaticResource SidebarLabelStyle}"/>
                                <ComboBox SelectedIndex="{Binding SelectedPeerIndex}"
                                          Style="{StaticResource SidebarComboBoxStyle}"
                                          IsEnabled="{Binding IsConnected, Converter={StaticResource InverseBoolConverter}}">
                                    <ComboBoxItem>Peer 0</ComboBoxItem>
                                    <ComboBoxItem>Peer 1</ComboBoxItem>
                                    <ComboBoxItem>Peer 2</ComboBoxItem>
                                    <ComboBoxItem>Peer 3</ComboBoxItem>
                                    <ComboBoxItem>Peer 4</ComboBoxItem>
                                    <ComboBoxItem>Peer 5</ComboBoxItem>
                                    <ComboBoxItem>Peer 6</ComboBoxItem>
                                    <ComboBoxItem>Peer 7</ComboBoxItem>
                                    <ComboBoxItem>Peer 8 (ÁÆ°ÁêÜÂëò)</ComboBoxItem>
                                    <ComboBoxItem>Peer 9 (ÁÆ°ÁêÜÂëò)</ComboBoxItem>
                                </ComboBox>
                            </StackPanel>
                        </GroupBox>

                        <!-- ÊàøÈó¥ËÆæÁΩÆ -->
                        <GroupBox Header="üö™ ÊàøÈó¥ËÆæÁΩÆ" 
                                  Style="{StaticResource SidebarGroupBoxStyle}"
                                  IsEnabled="{Binding IsConnected}">
                            <StackPanel>
                                <Label Content="ÈÄâÊã©ÊàøÈó¥:" Style="{StaticResource SidebarLabelStyle}"/>
                                <ComboBox SelectedIndex="{Binding SelectedRoomIndex}"
                                          Style="{StaticResource SidebarComboBoxStyle}"
                                          IsEnabled="{Binding IsJoinedRoom, Converter={StaticResource InverseBoolConverter}}">
                                    <ComboBoxItem>Room 0</ComboBoxItem>
                                    <ComboBoxItem>Room 1</ComboBoxItem>
                                    <ComboBoxItem>Room 2</ComboBoxItem>
                                    <ComboBoxItem>Room 3</ComboBoxItem>
                                    <ComboBoxItem>Room 4</ComboBoxItem>
                                    <ComboBoxItem>Room 5</ComboBoxItem>
                                    <ComboBoxItem>Room 6</ComboBoxItem>
                                    <ComboBoxItem>Room 7</ComboBoxItem>
                                    <ComboBoxItem>Room 8</ComboBoxItem>
                                    <ComboBoxItem>Room 9</ComboBoxItem>
                                </ComboBox>
                            </StackPanel>
                        </GroupBox>

                        <!-- Â™í‰ΩìËÆæÂ§áÈÄâÊã© -->
                        <GroupBox Header="üéõÔ∏è ËÆæÂ§áÈÄâÊã©" Style="{StaticResource SidebarGroupBoxStyle}">
                            <StackPanel>
                                <Label Content="ÊëÑÂÉèÂ§¥:" Style="{StaticResource SidebarLabelStyle}"/>
                                <ComboBox ItemsSource="{Binding Cameras}"
                                          SelectedItem="{Binding SelectedCamera}"
                                          DisplayMemberPath="Label"
                                          Style="{StaticResource SidebarComboBoxStyle}"
                                          IsEnabled="{Binding IsCameraEnabled, Converter={StaticResource InverseBoolConverter}}"/>

                                <Label Content="È∫¶ÂÖãÈ£é:" Margin="0,8,0,0" Style="{StaticResource SidebarLabelStyle}"/>
                                <ComboBox ItemsSource="{Binding Microphones}"
                                          SelectedItem="{Binding SelectedMicrophone}"
                                          DisplayMemberPath="Label"
                                          Style="{StaticResource SidebarComboBoxStyle}"
                                          IsEnabled="{Binding IsMicrophoneEnabled, Converter={StaticResource InverseBoolConverter}}"/>

                                <Button Content="üîÑ Âà∑Êñ∞ËÆæÂ§á"
                                        Command="{Binding RefreshDevicesCommand}"
                                        Margin="0,12,0,0"
                                        Background="#3D3D5C"
                                        Foreground="#DDDDFF"
                                        BorderBrush="#5C5C8A"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- ÊàøÈó¥ÊàêÂëòÂàóË°® -->
                        <GroupBox Header="üë• ÊàøÈó¥ÊàêÂëò" 
                                  Style="{StaticResource SidebarGroupBoxStyle}"
                                  IsEnabled="{Binding IsJoinedRoom}">
                            <ListBox ItemsSource="{Binding Peers}" 
                                     MinHeight="100"
                                     MaxHeight="200"
                                     Background="#1A1A2E"
                                     BorderBrush="#3D3D5C">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal" Margin="4">
                                            <Ellipse Width="8" Height="8" 
                                                     Fill="#4CAF50" 
                                                     VerticalAlignment="Center"
                                                     Margin="0,0,8,0"/>
                                            <StackPanel>
                                                <TextBlock Text="{Binding DisplayName}" 
                                                           Foreground="#DDDDFF"
                                                           FontWeight="Medium"/>
                                                <TextBlock Text="{Binding PeerId}" 
                                                           Foreground="#7777AA" 
                                                           FontSize="10"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                        </GroupBox>

                        <!-- Áä∂ÊÄÅ‰ø°ÊÅØ -->
                        <GroupBox Header="‚ÑπÔ∏è Áä∂ÊÄÅ" Style="{StaticResource SidebarGroupBoxStyle}">
                            <StackPanel>
                                <TextBlock Text="{Binding StatusMessage}" 
                                           TextWrapping="Wrap"
                                           Foreground="#AAAACC"
                                           Margin="0,0,0,8"/>
                                <TextBlock Foreground="#8888AA">
                                    <Run Text="ÊúçÂä°Ê®°Âºè: "/>
                                    <Run Text="{Binding ServeMode, Converter={StaticResource ServeModeTextConverter}}" 
                                         Foreground="#7B68EE"
                                         FontWeight="Medium"/>
                                </TextBlock>
                                <TextBlock Margin="0,4,0,0" Foreground="#8888AA">
                                    <Run Text="ËøûÊé•Áä∂ÊÄÅ: "/>
                                    <Run Text="{Binding IsConnected, Converter={StaticResource ConnectedStatusConverter}}" 
                                         Foreground="{Binding IsConnected, Converter={StaticResource ConnectedColorConverter}}"
                                         FontWeight="Medium"/>
                                </TextBlock>
                            </StackPanel>
                        </GroupBox>
                        
                    </StackPanel>
                </ScrollViewer>
            </Border>

            <!-- ‰æßËæπÊ†èÂàáÊç¢ÊåâÈíÆ -->
            <Button Grid.Column="1"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center"
                    Style="{StaticResource SidebarToggleStyle}"
                    Command="{Binding ToggleSidebarCommand}"
                    ToolTip="ÂàáÊç¢‰æßËæπÊ†è">
                <TextBlock Text="{Binding IsSidebarVisible, Converter={StaticResource SidebarArrowConverter}}"
                           FontSize="14" 
                           Foreground="#AAAACC"/>
            </Button>

            <!-- Âè≥‰æß‰∏ªËßÜÈ¢ëÂå∫Âüü -->
            <Grid Grid.Column="1" Background="#0F0F1A">
                
                <!-- ËøúÁ´ØËßÜÈ¢ëÁΩëÊ†ºÂå∫Âüü -->
                <Border Margin="40,12,12,90" CornerRadius="8">
                    <Grid>
                        <!-- ËøúÁ´ØËßÜÈ¢ëÁΩëÊ†ºÂàóË°® -->
                        <ItemsControl ItemsSource="{Binding RemoteVideos}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <UniformGrid Columns="{Binding RemoteVideos.Count, 
                                        Converter={StaticResource VideoGridColumnsConverter}}"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="#1E1E2E" 
                                            Margin="4" 
                                            CornerRadius="8"
                                            MinWidth="200"
                                            MinHeight="150"
                                            ClipToBounds="True">
                                        <Grid>
                                            <Image Source="{Binding VideoFrame}" 
                                                   Stretch="UniformToFill"
                                                   RenderOptions.BitmapScalingMode="HighQuality"/>
                                            
                                            <!-- Êó†ËßÜÈ¢ëÊó∂ÁöÑÂç†‰ΩçÁ¨¶ -->
                                            <StackPanel HorizontalAlignment="Center" 
                                                        VerticalAlignment="Center"
                                                        Visibility="{Binding VideoFrame, 
                                                            Converter={StaticResource NullToVisConverter}}">
                                                <Ellipse Width="60" Height="60" 
                                                         Fill="#2D2D4D" Margin="0,0,0,8"/>
                                                <TextBlock Text="{Binding DisplayName}" 
                                                           Foreground="#7777AA"
                                                           FontSize="14"
                                                           HorizontalAlignment="Center"/>
                                            </StackPanel>
                                            
                                            <!-- Áî®Êà∑ÂêçÊ†áÁ≠æ -->
                                            <Border Background="#80000000"
                                                    Padding="10,6"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Bottom"
                                                    Margin="8"
                                                    CornerRadius="4">
                                                <StackPanel Orientation="Horizontal">
                                                    <Ellipse Width="8" Height="8" 
                                                             Fill="#4CAF50" 
                                                             VerticalAlignment="Center"
                                                             Margin="0,0,6,0"/>
                                                    <TextBlock Text="{Binding DisplayName}" 
                                                               Foreground="White" 
                                                               FontSize="12"/>
                                                </StackPanel>
                                            </Border>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                        
                        <!-- Êó†ËøúÁ´ØËßÜÈ¢ëÊó∂ÁöÑÂç†‰ΩçÁ¨¶ -->
                        <StackPanel HorizontalAlignment="Center" 
                                    VerticalAlignment="Center"
                                    Visibility="{Binding HasNoRemoteVideos, 
                                        Converter={StaticResource BoolToVisConverter}}">
                            <Ellipse Width="100" Height="100" 
                                     Fill="#1E1E2E"
                                     Margin="0,0,0,16"/>
                            <TextBlock Text="Á≠âÂæÖÂÖ∂‰ªñÂèÇ‰∏éËÄÖÂä†ÂÖ•..." 
                                       Foreground="#5555AA"
                                       FontSize="18"
                                       HorizontalAlignment="Center"/>
                            <TextBlock Text="ÂΩìÊúâÁî®Êà∑Âä†ÂÖ•ÊàøÈó¥Âπ∂ÂºÄÂêØËßÜÈ¢ëÊó∂ÔºåÂ∞ÜÂú®Ê≠§Â§ÑÊòæÁ§∫" 
                                       Foreground="#3D3D5C"
                                       FontSize="12"
                                       HorizontalAlignment="Center"
                                       Margin="0,8,0,0"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Êú¨Âú∞ËßÜÈ¢ëÈ¢ÑËßà - ÊÇ¨ÊµÆÂè≥‰∏ãËßí -->
                <Border Background="#1E1E2E" 
                        Margin="0,0,20,100" 
                        CornerRadius="8"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Bottom"
                        Width="220"
                        Height="150"
                        ClipToBounds="True"
                        BorderBrush="#3D3D5C"
                        BorderThickness="2">
                    <Border.Effect>
                        <DropShadowEffect Color="Black" BlurRadius="15" ShadowDepth="5" Opacity="0.5"/>
                    </Border.Effect>
                    <Grid>
                        <Image Source="{Binding LocalVideoFrame}" 
                               Stretch="UniformToFill"
                               RenderOptions.BitmapScalingMode="HighQuality"/>
                        
                        <!-- Êó†Êú¨Âú∞ËßÜÈ¢ëÊó∂ÁöÑÂç†‰ΩçÁ¨¶ -->
                        <StackPanel HorizontalAlignment="Center" 
                                    VerticalAlignment="Center"
                                    Visibility="{Binding LocalVideoFrame, 
                                        Converter={StaticResource NullToVisConverter}}">
                            <Ellipse Width="40" Height="40" 
                                     Fill="#2D2D4D" Margin="0,0,0,4"/>
                            <TextBlock Text="Êú¨Âú∞È¢ÑËßà" 
                                       Foreground="#6666AA"
                                       FontSize="11"
                                       HorizontalAlignment="Center"/>
                        </StackPanel>
                        
                        <!-- Êú¨Âú∞ËßÜÈ¢ëÊ†áÁ≠æ -->
                        <Border Background="#80000000"
                                Padding="8,4"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Bottom"
                                Margin="6"
                                CornerRadius="4">
                            <TextBlock Text="üìπ Êàë" 
                                       Foreground="White" 
                                       FontSize="11"/>
                        </Border>
                    </Grid>
                </Border>

                <!-- Â∫ïÈÉ®ÊéßÂà∂Ê†è -->
                <Border Background="#16213E"
                        VerticalAlignment="Bottom"
                        Height="80"
                        CornerRadius="16,16,0,0">
                    <Border.Effect>
                        <DropShadowEffect Color="Black" BlurRadius="10" ShadowDepth="-3" Opacity="0.3" Direction="90"/>
                    </Border.Effect>
                    <StackPanel Orientation="Horizontal" 
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center">
                        
                        <!-- ËøûÊé•/Êñ≠ÂºÄÊúçÂä°Âô®ÊåâÈíÆ -->
                        <Button Command="{Binding ToggleConnectionCommand}"
                                IsEnabled="{Binding IsBusy, Converter={StaticResource InverseBoolConverter}}"
                                ToolTip="{Binding IsConnected, Converter={StaticResource ConnectButtonTextConverter}}">
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource CircleButtonStyle}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsConnected}" Value="True">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate>
                                                        <Grid>
                                                            <Ellipse Fill="#28A745" Stroke="#34CE57" StrokeThickness="1"/>
                                                            <TextBlock Text="üîå" FontSize="20" 
                                                                       HorizontalAlignment="Center" 
                                                                       VerticalAlignment="Center"/>
                                                        </Grid>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                            <TextBlock Text="üîå" FontSize="20" Foreground="#DDDDFF"/>
                        </Button>
                        
                        <!-- Âä†ÂÖ•/Á¶ªÂºÄÊàøÈó¥ÊåâÈíÆ -->
                        <Button Command="{Binding ToggleRoomCommand}"
                                IsEnabled="{Binding IsBusy, Converter={StaticResource InverseBoolConverter}}"
                                ToolTip="{Binding IsJoinedRoom, Converter={StaticResource RoomButtonTextConverter}}">
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource CircleButtonStyle}">
                                    <Setter Property="IsEnabled" Value="{Binding IsConnected}"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsJoinedRoom}" Value="True">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate>
                                                        <Grid>
                                                            <Ellipse Fill="#DC3545" Stroke="#E4606D" StrokeThickness="1"/>
                                                            <TextBlock Text="üö™" FontSize="20" 
                                                                       HorizontalAlignment="Center" 
                                                                       VerticalAlignment="Center"/>
                                                        </Grid>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                            <TextBlock Text="üö™" FontSize="20" Foreground="#DDDDFF"/>
                        </Button>

                        <!-- ÂàÜÈöîÁ∫ø -->
                        <Border Width="1" Height="40" Background="#3D3D5C" Margin="12,0"/>
                        
                        <!-- ÊëÑÂÉèÂ§¥ÂºÄÂÖ≥ÊåâÈíÆ -->
                        <Button Command="{Binding ToggleCameraCommand}"
                                IsEnabled="{Binding IsBusy, Converter={StaticResource InverseBoolConverter}}"
                                ToolTip="{Binding IsCameraEnabled, Converter={StaticResource CameraButtonTextConverter}}">
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource CircleButtonStyle}">
                                    <Setter Property="IsEnabled" Value="{Binding IsJoinedRoom}"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsCameraEnabled}" Value="True">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate>
                                                        <Grid>
                                                            <Ellipse Fill="#28A745" Stroke="#34CE57" StrokeThickness="1"/>
                                                            <TextBlock Text="üì∑" FontSize="20" 
                                                                       HorizontalAlignment="Center" 
                                                                       VerticalAlignment="Center"/>
                                                        </Grid>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                            <TextBlock Text="üì∑" FontSize="20" Foreground="#DDDDFF"/>
                        </Button>
                        
                        <!-- È∫¶ÂÖãÈ£éÂºÄÂÖ≥ÊåâÈíÆ -->
                        <Button Command="{Binding ToggleMicrophoneCommand}"
                                IsEnabled="{Binding IsBusy, Converter={StaticResource InverseBoolConverter}}"
                                ToolTip="{Binding IsMicrophoneEnabled, Converter={StaticResource MicButtonTextConverter}}">
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource CircleButtonStyle}">
                                    <Setter Property="IsEnabled" Value="{Binding IsJoinedRoom}"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsMicrophoneEnabled}" Value="True">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate>
                                                        <Grid>
                                                            <Ellipse Fill="#28A745" Stroke="#34CE57" StrokeThickness="1"/>
                                                            <TextBlock Text="üé§" FontSize="20" 
                                                                       HorizontalAlignment="Center" 
                                                                       VerticalAlignment="Center"/>
                                                        </Grid>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                            <TextBlock Text="üé§" FontSize="20" Foreground="#DDDDFF"/>
                        </Button>
                        
                    </StackPanel>
                </Border>

                <!-- Âä†ËΩΩÊåáÁ§∫Âô® -->
                <Border Background="#80000000"
                        Visibility="{Binding IsBusy, Converter={StaticResource BoolToVisConverter}}">
                    <StackPanel HorizontalAlignment="Center" 
                                VerticalAlignment="Center">
                        <ProgressBar IsIndeterminate="True" 
                                     Width="100" 
                                     Height="4"
                                     Foreground="#7B68EE"/>
                        <TextBlock Text="Â§ÑÁêÜ‰∏≠..." 
                                   Foreground="White" 
                                   Margin="0,12,0,0"
                                   HorizontalAlignment="Center"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>
    </Grid>
</Window>
